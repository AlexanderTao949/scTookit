% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Cell_frequancy.R
\name{CellCompPlot}
\alias{CellCompPlot}
\title{Visualize cluster composition across groups}
\usage{
CellCompPlot(
  data,
  clusters,
  group,
  widths = c(3, 1),
  log = TRUE,
  legend.title = "Group",
  color = 1,
  xlab = ""
)
}
\arguments{
\item{data}{A Seurat object containing single-cell RNA-seq data}

\item{clusters}{Character string specifying the column name in meta.data
containing cluster identities (default: "seurat_clusters")}

\item{group}{Character string specifying the column name in meta.data
defining the grouping variable (e.g., "orig.ident", "sample", "condition")}

\item{widths}{Numeric vector of length 2 specifying relative widths for the
composition plot and cell count plot (default: c(3, 1))}

\item{log}{Logical indicating whether to display cell counts on log10 scale
in the right panel (default: TRUE)}

\item{legend.title}{Character string for the legend title (default: "Group")}

\item{color}{Integer specifying color palette: 1 = D3 Category 20c
(supports up to 20 groups), 2 = ColorBrewer Set2 (supports up to 8 groups)}

\item{xlab}{Character string for x-axis label of the composition plot
(default: "")}
}
\value{
A ggplot object combining two plots via patchwork: left panel shows
  stacked percentage bars of group composition per cluster, right panel shows
  total cell counts per cluster. Returns NULL if input data is invalid.
}
\description{
This function generates a two-panel visualization showing the distribution of
cell clusters across different experimental groups or samples. The left panel
displays the proportional composition of each cluster (stacked percentage bar),
while the right panel shows the absolute cell counts per cluster.
}
\details{
Clusters are automatically sorted: numeric cluster IDs (e.g., "0", "1") are
sorted in descending order; non-numeric IDs are sorted by cell count
(ascending). The function handles up to 20 groups with color scheme 1 or
up to 8 groups with color scheme 2, issuing warnings if group numbers exceed
these limits.
}
\examples{
\dontrun{
# Basic usage with default parameters
ClusterCompPlot(data = seurat_obj,
                clusters = "seurat_clusters",
                group = "orig.ident")

# Custom grouping with condition labels and Set2 colors
ClusterCompPlot(data = seurat_obj,
                clusters = "cell_type",
                group = "treatment",
                legend.title = "Treatment",
                color = 2,
                xlab = "Cell Clusters")
}
}
